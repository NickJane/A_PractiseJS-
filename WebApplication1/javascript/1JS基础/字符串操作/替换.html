<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <style type="text/css">
        .container { margin:20px auto; width:500px; border:1px solid gray; padding:10px; }
        .content { height:300px; margin-top:10px; border:1px solid gray; }
    </style>
    <script type="text/javascript">
        var teststr = "aaaTTbbbTT";
        teststr.replace(/TT/g, function () {
            console.log("执行一次");
            //字符串aaaTTbbbTT里有匹配TT 有两处. 因此这个匿名函数会执行两次
        });
        teststr.replace(/TT/g, function (matchedValue, matchedIndex, toBeMatched) {
            //打印如下结果
            /*
            TT  3  aaaTTbbbTT
            8 执行一次
            TT  8  aaaTTbbbTT
            执行一次
            */
            //第一个参数是这次匹配的值, 第二个是在被匹配字符串的索引位置, 第三个被匹配字符串
            console.log(matchedValue + '  ' + matchedIndex + '  ' + toBeMatched);
            console.log("执行一次");
        });

        function search() {
            document.getElementById('content').innerHTML = document.getElementById('txtcontent').value;
            var value = document.getElementById('txtSearch').value;
            var content = document.getElementById('content').innerHTML;
            
            var reg=new RegExp(value,"gi")
            document.getElementById('content').innerHTML =
                content.replace(reg, function (matchedValue, matchedIndex, toBeMatched) {
                return "<span style='background-color:yellow'>" + matchedValue + "</span>";
            })
        }
        function replace() {
            document.getElementById('content').innerHTML = document.getElementById('txtcontent').value;
            var from = document.getElementById('from').value;
            var to = document.getElementById('to').value;
            var content = document.getElementById('content').innerHTML;

            var reg = new RegExp(from, "gi")
            document.getElementById('content').innerHTML =
                content.replace(reg, function (matchedValue, matchedIndex, toBeMatched) {
                    return to;
                })
        }
        window.onload = function () {
            document.getElementById('txtcontent').value = document.getElementById('content').innerHTML;
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="header">
            <input id="txtSearch" type="text" /><input onclick="search()" type="button" value="查找" />
            <br />
            <input id="from" type="text" />To<input id="to" type="text" />To
            <input onclick="replace()" type="button" value="替换" />
        </div>
        <input type="hidden" id="txtcontent" />
        <div id="content" class="content">
            习近平为何选择这个日子谋新篇？
经济发展长期向好 论述互联网发展中国主张 网络空间新秩序
李克强祝贺中泰铁路项目启动 谈判难点| 乌镇锋会 乌镇倡议
大龄夫妇扎堆尝试试管二孩 年龄最大59岁
中国人成泰国试管婴儿生意主力军 包生男孩 无结婚证都可做
母亲让女儿用父亲医保卡买药 母女均获刑
为母亲配药34次报销万余元 双倍罚款 因母亲保险报销比例小
印尼一客轮遇险 警方称船或仍浮在海面
118人生死未卜 曾遭恶劣海况致引擎失灵 目前客轮已被定位
一教师猥亵多名幼女 受害者与其多是亲戚
性侵行为已有20余年| 追问：为何性侵儿童罪犯容易逍遥法外？
        </div>
    </div>
</body>
</html>
